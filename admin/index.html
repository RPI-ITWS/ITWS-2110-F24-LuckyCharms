<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Home</title>
  <script src="../resources/script.js"></script>
  <script src="../resources/lablist_and_checkout.js"></script>
  <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
  
  <script>
    //minified version of admin.js
    document.addEventListener("DOMContentLoaded",function(){if(document.cookie.indexOf('userid=')===-1||document.cookie.indexOf('admin=')===-1||document.cookie.substring(document.cookie.indexOf('admin=')+6)!=="1"){location.href="../login"}
$.getJSON("../resources/data.json",function(dat){populate(dat);const userID=parseInt(document.cookie.substring(7,document.cookie.indexOf(";")));const user=dat.users.find(u=>u.id===userID);const userName=user?user.username:"Guest";const isAdmin=user.is_admin?!0:!1;document.getElementById("menu-icon").onclick=()=>{menuClick(userName,isAdmin)}
userLabs(userID,dat)});const addButton=document.getElementById('add-button');addButton.addEventListener('click',function(){const addForm=document.getElementById('add-form');addForm.style.display="flex"});const addForm=document.getElementById('add-form-object');addForm.addEventListener('submit',function(event){event.preventDefault();const labName=document.getElementById('lab-name').textContent;const itemName=document.getElementById('item-name').value;const itemType=document.getElementById('type-dropdown').value;const itemDescription=document.getElementById('new-item-description').value;const itemStock=document.getElementById('item-quantity').value;const itemImage=document.getElementById('item-image').value;if(itemName.length>50){alert("The item name must be less than 100 charecters!")}else{const formContainer=document.getElementById('add-form');formContainer.style.display="none";console.log("Lab Name: ",labName);console.log("Item Name: ",itemName);console.log("Item Type: ",itemType);console.log("Item Description: ",itemDescription);console.log("Item Stock: ",itemStock);console.log("Item Image: ",itemImage);addForm.reset()}});const cancelAddFormButton=document.getElementById('cancel-add-form-button');cancelAddFormButton.addEventListener('click',function(){const addForm=document.getElementById('add-form-object');addForm.reset();const formContainer=document.getElementById('add-form');formContainer.style.display="none"});const removeButton=document.getElementById('remove-button');removeButton.addEventListener('click',function(){const deleteForm=document.getElementById('delete-item');deleteForm.style.display="flex";const deleteTitle=document.getElementById('delete-title');const itemTitleContainer=document.getElementById('item-title-text');const itemTitle=itemTitleContainer.textContent;deleteTitle.textContent="Delete "+itemTitle});const deleteButton=document.getElementById('delete-button');deleteButton.addEventListener('click',function(){const itemTitleContainer=document.getElementById('item-title-text');const itemTitle=itemTitleContainer.textContent;const labName=document.getElementById('lab-name').textContent;console.log("Lab to check:",labName);console.log("Item to delete: ",itemTitle);const deleteContainer=document.getElementById('delete-item');deleteContainer.style.display="none"});const cancelButton=document.getElementById('cancel-delete-button');cancelButton.addEventListener('click',function(){const deleteContainer=document.getElementById('delete-item');deleteContainer.style.display="none"})})
  </script>
  <link rel="stylesheet" href="../resources/pages.css" media="screen">
  <link rel="stylesheet" type="text/css" href="../user/style.css">
  <style>
    /*minified version of admin_forms.css*/
    #delete-item{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgb(0 0 0 / .5);justify-content:center;align-items:center;z-index:9999}#delete-container{display:flex;flex-direction:column;background-color:#fff;padding:20px;border-radius:20px;width:500px;box-shadow:0 4px 8px rgb(0 0 0 / .2);position:relative;align-items:center;justify-content:center}#warning{align-items:center;justify-content:center;width:90%}#add-form{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgb(0 0 0 / .5);justify-content:center;align-items:center;z-index:9999}#add-form-container{display:flex;flex-direction:column;background-color:#fff;padding:20px;border-radius:20px;width:500px;box-shadow:0 4px 8px rgb(0 0 0 / .2);position:relative;align-items:center;justify-content:center}#add-form-object{align-items:center;justify-content:center;width:90%}#add-form-object input{border-radius:10px;border-width:1px}#item-image{border-radius:0}
  </style>
<body>
  <header>
    <h1 class="logo">LIMBS</h1>
    <nav class="navbar">
      <div id="dropdown">
        <button id="menu-icon">&#9776;</button>
      </div>
    </nav>
  </header>

  <main>
    <div class="sidebar">
      <div id="sidebar-title">Labs</div>
      <ul id="lab-list">
        <!-- labs populated dynamically -->
      </ul>
    </div>

    <div class="content">
      <div class="lab-title">
        <h2 id="lab-name">No Labs</h2>
        <div class="search-bar">
          <input type="text" placeholder="Search">
        </div>
      </div>
  
      <table id="item-table">
        <thead>
          <tr>
            <th>Item Name</th>
            <th>Item Type</th>
            <th>Status</th>
          </tr>
        </thead>
  
        <tbody id="lab-items">
          <!-- items populated dynamically -->
        </tbody>
      </table>

      <button id="add-button"><span id="add-icon">+</span> Add Item</button>
    </div>

    <div class="right-sidebar">
      <p id="go-back">&raquo;</p>

      <div id="item-title">
        <h3 id="item-title-text">Item 1</h3>
      </div>

      <div id="item-type">
        <h3 class="item-labels">Item Type</h3>
        <h4 class="item-status" id="item-type-text">Borrowable</h4>
      </div>

      <div id="item-status">
        <h3 class="item-labels">Status</h3>
        <h4 class="item-status">In Stock</h4>
      </div>

      <div id="item-quantity">
        <h3 class="item-labels">Quantity Availible</h3>
        <h4 id="item-quantity-text">100 out of 1000</h4>
      </div>

      <div id="item-description">
        <h3 class="item-labels" id="description-title">Description</h3>

        <p id="item-description-list">Text</p>
      </div>

      <button class="form-button" style="background-color: lightgreen;" id="checkout-button">CHECK OUT</button>
      <button class="form-button" style="background-color: skyblue;" id="edit-button">EDIT ITEM</button>
      <button class="form-button" style="background-color: red;" id="remove-button">REMOVE ITEM</button>
    </div>

    <div id="add-form">
      <div id="add-form-container">
        <h2 id="add-form-title">Add Item</h2>

        <form id="add-form-object">
          <label for="item-name">Item Name:</label>
          <input type="text" id="item-name" name="item-name" required><br><br>

          <label for="new-item-description">Item Description:</label>
          <textarea id="new-item-description" name="new-item-description" maxlength="1000" placeholder="Describe the item..."></textarea><br><br>

          <label for="type-dropdown">Item Type:</label>
          <select id="type-dropdown" required>
            <option value="" disabled selected>Select an option</option>
            <option value="Borrowable">Borrowable</option>
            <option value="Removable">Removable</option>
          </select><br><br>

          <label for="item-quantity">Stock:</label>
          <input type="number" id="item-quantity" name="item-quantity" min="1" max="1000" required><br><br>

          <label for="item-image">Item Image:</label>
          <input type="file" id="item-image" accept="image/*">

          <button type="submit" class="form-button" style="background-color: lightgreen;"  id="add-form-button">ADD ITEM</button>
          <button type="button" class="form-button" style="background-color: lightcoral;" id="cancel-add-form-button">CANCEL</button>
        </form>
      </div>
    </div>

    <div id="checkout-form">
      <div id="form-container">
        <h2 id="form-title">Checkout Item</h2>
        <form id="form-object">
          <label for="name">Full Name (Counts As Signiture):</label>
          <input type="text" id="name" name="name" required><br><br>

          <label for="returnDate" id="returnDateLabel">Planned Return Date (Within 2 weeks):</label>
          <input type="date" id="returnDate" name="returnDate" required><br id="returnDateBreak1"><br id="returnDateBreak2">
          
          <label for="quantity">Quantity:</label>
          <input type="number" id="quantity" name="quantity" min="1" max="100" required><br><br>

          <label for="reason">Reason for Checkout:</label>
          <textarea id="reason" name="reason" maxlength="1000" required placeholder="Explain why you need this item..."></textarea><br><br>

          <input type="checkbox" id="agreeReturn" name="agreeReturn" required>
          <label for="agreeReturn" id="agreeReturnLabel">I understand that I have a responsibility to return the item by the date provided.</label><br><br>

          <input type="checkbox" id="agreeNotify" name="agreeNotify" required>
          <label for="agreeNotify" id="agreeNotifyLabel">I understand that if I want to change the return date, I have to notify the lab administrator.</label><br><br>

          <button type="submit" class="form-button" style="background-color: lightgreen;" id="checkout-form-button">CHECK OUT</button>
          <button type="button" class="form-button" style="background-color: lightcoral;" id="cancel-checkout-form-button">CANCEL</button>
        </form>
      </div>
    </div>

    <div id="delete-item">
      <div id="delete-container">
        <h2 id="delete-title">Delete Item</h2>

        <p id="warning">Are you sure you want to remove this item from the lab list?</p>

        <button type="button" class="form-button" style="background-color: red;" id="delete-button">DELETE ITEM</button>
        <button type="button" class="form-button" style="background-color: lightcoral;" id="cancel-delete-button">CANCEL</button>
      </div>
    </div>
  </main>

</body>
</html>