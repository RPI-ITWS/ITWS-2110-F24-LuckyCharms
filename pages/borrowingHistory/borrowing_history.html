<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Borrowing History</title>
        <link rel="stylesheet" href="./borrowing_history.css" media="screen">
        <script src="/resources/script.js"></script>
        <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
        <script>
            colorItemStatus();
            
            //If the userid or admin cookies aren't set, or if they are not an admin, redirect to login page
            if(document.cookie.indexOf('userid=')===-1 || document.cookie.indexOf('admin=')===-1 ||
                document.cookie.substring(document.cookie.indexOf('admin=')+6)!=="1"){
              location.href="/pages/login.html";
            }
            // Populates the page based on the userid stored in the userid cookie
            $.getJSON("/resources/data.json", function(dat) {
              const userID = parseInt(document.cookie.substring(7, document.cookie.indexOf(";")));
              const user = dat.users.find(u => u.id === userID);
              const userName = user ? user.username : "Guest";
              const isAdmin = true;
        
              // Call menuClick with the user's name when the menu button is clicked
              $('#menu-icon').on('click', function() {
                menuClick(userName, isAdmin);
              });
        
              // Populate labs with the user's labs
              userLabs(userID, dat);
            });
          </script>     
          <script src="./borrowing_history.js"></script>   
    </head>
    <body>
        <header>
            <h1 class="logo">LIMBS</h1>
            <nav class="navbar">
              <div id="dropdown">
                <button onclick="menuClick()" id="menu-icon">&#9776;</button>
              </div>
            </nav>
        </header>

        <div id="content">
            <div id="tab-bar">
                <h2 class="tab-button" onclick="currentlyBorrowingClick()">Currently Borrowing</h2>
                <h2 class="tab-button" id="chosen" onClick="borrowingHistoryClick()">Borrowing History</h2>
    
                <div id="search-bar">
                    <input type="text" placeholder="Search">
                </div>
            </div>
    
            <table>
                <thead>
                    <tr>
                        <th>Item Name</th>
                        <th>Lab/Place</th>
                        <th>Status</th>
                        <th>Reservation Date</th>
                        <th>Expected Return Date</th>
                    </tr>
                </thead>
    
                <tbody>
                    <tr>
                        <td class="item-name">Item 1</td>
                        <td class="place">Web Systems</td>
                        <td><span class="status">OVERDUE - RETURN NOW</span></td>
                        <td class="reservation">March 23, 2023</td>
                        <td class="expected-return-date">April 23, 2023</td>
                    </tr>
                    <tr>
                        <td class="item-name"></td>
                        <td class="place"></td>
                        <td><span class="status"></span></td>
                        <td class="reservation"></td>
                        <td class="expected-return-date"></td>
                    </tr>
                    <tr>
                        <td class="item-name"> </td>
                        <td class="place"> </td>
                        <td><span class="status"></span></td>
                        <td class="reservation"> </td>
                        <td class="expected-return-date"> </td>
                    </tr>
                    <tr>
                        <td class="item-name"> </td>
                        <td class="place"> </td>
                        <td><span class="status"></span></td>
                        <td class="reservation"> </td>
                        <td class="expected-return-date"> </td>
                    </tr>
                    <tr>
                        <td class="item-name"> </td>
                        <td class="place"> </td>
                        <td><span class="status"></span></td>
                        <td class="reservation"> </td>
                        <td class="expected-return-date"> </td>
                    </tr>
                    <tr>
                        <td class="item-name"> </td>
                        <td class="place"> </td>
                        <td><span class="status"></span></td>
                        <td class="reservation"> </td>
                        <td class="expected-return-date"> </td>
                    </tr>
                    <tr>
                        <td class="item-name"> </td>
                        <td class="place"> </td>
                        <td><span class="status"></span></td>
                        <td class="reservation"> </td>
                        <td class="expected-return-date"> </td>
                    </tr>
                    <tr>
                        <td class="item-name"> </td>
                        <td class="place"> </td>
                        <td><span class="status"></span></td>
                        <td class="reservation"> </td>
                        <td class="expected-return-date"> </td>
                    </tr>
                    <tr>
                        <td class="item-name"> </td>
                        <td class="place"> </td>
                        <td><span class="status"></span></td>
                        <td class="reservation"> </td>
                        <td class="expected-return-date"> </td>
                    </tr>
                    <tr>
                        <td class="item-name"> </td>
                        <td class="place"> </td>
                        <td><span class="status"></span></td>
                        <td class="reservation"> </td>
                        <td class="expected-return-date"> </td>
                    </tr>
                    <tr>
                        <td class="item-name"> </td>
                        <td class="place"> </td>
                        <td><span class="status"></span></td>
                        <td class="reservation"> </td>
                        <td class="expected-return-date"> </td>
                    </tr>
                    <tr>
                        <td class="item-name"> </td>
                        <td class="place"> </td>
                        <td><span class="status"></span></td>
                        <td class="reservation"> </td>
                        <td class="expected-return-date"> </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </body>
</html>